name: Debug Supabase Activity

on:
  workflow_dispatch: # Vamos rodar manual para testar

jobs:
  debug_api:
    runs-on: ubuntu-latest
    steps:
      - name: Check API Response
        run: |
          # Faz a requisição e salva o corpo da resposta
          echo "Testando conexão com a tabela..."
          
          # Tente mudar 'profile' abaixo para o que você viu no Table Editor (ex: profiles ou Profile)
          RESPONSE=$(curl -s -X GET "${{ secrets.SUPABASE_URL }}/rest/v1/profile?select=*" \
            -H "apikey: ${{ secrets.SUPABASE_ANON_KEY }}" \
            -H "Authorization: Bearer ${{ secrets.SUPABASE_ANON_KEY }}" \
            -H "Range: 0-0")

          echo "Corpo da resposta do Supabase:"
          echo "$RESPONSE"
